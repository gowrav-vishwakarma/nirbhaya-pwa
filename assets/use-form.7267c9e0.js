import{A as et,r as j,t as rt,a as it}from"./index.168e4218.js";var ot=function(){function r(t){this.groups=[],this.each=!1,this.context=void 0,this.type=t.type,this.name=t.name,this.target=t.target,this.propertyName=t.propertyName,this.constraints=t==null?void 0:t.constraints,this.constraintCls=t.constraintCls,this.validationTypeOptions=t.validationTypeOptions,t.validationOptions&&(this.message=t.validationOptions.message,this.groups=t.validationOptions.groups,this.always=t.validationOptions.always,this.each=t.validationOptions.each,this.context=t.validationOptions.context)}return r}(),st=function(){function r(){}return r.prototype.transform=function(t){var n=[];return Object.keys(t.properties).forEach(function(e){t.properties[e].forEach(function(i){var o={message:i.message,groups:i.groups,always:i.always,each:i.each},s={type:i.type,name:i.name,target:t.name,propertyName:e,constraints:i.constraints,validationTypeOptions:i.options,validationOptions:o};n.push(new ot(s))})}),n},r}();function at(r){return r instanceof Map?Array.from(r.values()):Array.isArray(r)?r:Array.from(r)}function ft(){if(typeof globalThis!="undefined")return globalThis;if(typeof global!="undefined")return global;if(typeof window!="undefined")return window;if(typeof self!="undefined")return self}function G(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var ct=globalThis&&globalThis.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&r[t],e=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K=globalThis&&globalThis.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var e=n.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=e.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}return o},ut=globalThis&&globalThis.__spreadArray||function(r,t,n){if(n||arguments.length===2)for(var e=0,i=t.length,o;e<i;e++)(o||!(e in t))&&(o||(o=Array.prototype.slice.call(t,0,e)),o[e]=t[e]);return r.concat(o||Array.prototype.slice.call(t))},pt=function(){function r(){this.validationMetadatas=new Map,this.constraintMetadatas=new Map}return Object.defineProperty(r.prototype,"hasValidationMetaData",{get:function(){return!!this.validationMetadatas.size},enumerable:!1,configurable:!0}),r.prototype.addValidationSchema=function(t){var n=this,e=new st().transform(t);e.forEach(function(i){return n.addValidationMetadata(i)})},r.prototype.addValidationMetadata=function(t){var n=this.validationMetadatas.get(t.target);n?n.push(t):this.validationMetadatas.set(t.target,[t])},r.prototype.addConstraintMetadata=function(t){var n=this.constraintMetadatas.get(t.target);n?n.push(t):this.constraintMetadatas.set(t.target,[t])},r.prototype.groupByPropertyName=function(t){var n={};return t.forEach(function(e){n[e.propertyName]||(n[e.propertyName]=[]),n[e.propertyName].push(e)}),n},r.prototype.getTargetValidationMetadatas=function(t,n,e,i,o){var s,a,u=function(h){return typeof h.always!="undefined"?h.always:h.groups&&h.groups.length?!1:e},c=function(h){return!!(i&&(!o||!o.length)&&h.groups&&h.groups.length)},p=this.validationMetadatas.get(t)||[],d=p.filter(function(h){return h.target!==t&&h.target!==n?!1:u(h)?!0:c(h)?!1:o&&o.length>0?h.groups&&!!h.groups.find(function(y){return o.indexOf(y)!==-1}):!0}),f=[];try{for(var x=ct(this.validationMetadatas.entries()),L=x.next();!L.done;L=x.next()){var b=K(L.value,2),S=b[0],T=b[1];t.prototype instanceof S&&f.push.apply(f,ut([],K(T),!1))}}catch(h){s={error:h}}finally{try{L&&!L.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}var A=f.filter(function(h){return typeof h.target=="string"||h.target===t||h.target instanceof Function&&!(t.prototype instanceof h.target)?!1:u(h)?!0:c(h)?!1:o&&o.length>0?h.groups&&!!h.groups.find(function(y){return o.indexOf(y)!==-1}):!0}),O=A.filter(function(h){return!d.find(function(y){return y.propertyName===h.propertyName&&y.type===h.type})});return d.concat(O)},r.prototype.getTargetValidatorConstraints=function(t){return this.constraintMetadatas.get(t)||[]},r}();function lt(){var r=ft();return r.classValidatorMetadataStorage||(r.classValidatorMetadataStorage=new pt),r.classValidatorMetadataStorage}var Q=function(){function r(){}return r.prototype.toString=function(t,n,e,i){var o=this;t===void 0&&(t=!1),n===void 0&&(n=!1),e===void 0&&(e=""),i===void 0&&(i=!1);var s=t?"\x1B[1m":"",a=t?"\x1B[22m":"",u=function(){var d;return(i?Object.values:Object.keys)((d=o.constraints)!==null&&d!==void 0?d:{}).join(", ")},c=function(d){return" - property ".concat(s).concat(e).concat(d).concat(a," has failed the following constraints: ").concat(s).concat(u()).concat(a,` 
`)};if(n){var p=Number.isInteger(+this.property)?"[".concat(this.property,"]"):"".concat(e?".":"").concat(this.property);return this.constraints?c(p):this.children?this.children.map(function(d){return d.toString(t,!0,"".concat(e).concat(p),i)}).join(""):""}else return"An instance of ".concat(s).concat(this.target?this.target.constructor.name:"an object").concat(a,` has failed the validation:
`)+(this.constraints?c(this.property):"")+(this.children?this.children.map(function(d){return d.toString(t,!0,o.property,i)}).join(""):"")},r}(),D=function(){function r(){}return r.isValid=function(t){var n=this;return t!=="isValid"&&t!=="getMessage"&&Object.keys(this).map(function(e){return n[e]}).indexOf(t)!==-1},r.CUSTOM_VALIDATION="customValidation",r.NESTED_VALIDATION="nestedValidation",r.PROMISE_VALIDATION="promiseValidation",r.CONDITIONAL_VALIDATION="conditionalValidation",r.WHITELIST="whitelistValidation",r.IS_DEFINED="isDefined",r}();function dt(r){return Array.isArray(r)?r.join(", "):(typeof r=="symbol"&&(r=r.description),"".concat(r))}var ht=function(){function r(){}return r.replaceMessageSpecialTokens=function(t,n){var e;return t instanceof Function?e=t(n):typeof t=="string"&&(e=t),e&&Array.isArray(n.constraints)&&n.constraints.forEach(function(i,o){e=e.replace(new RegExp("\\$constraint".concat(o+1),"g"),dt(i))}),e&&n.value!==void 0&&n.value!==null&&["string","boolean","number"].includes(typeof n.value)&&(e=e.replace(/\$value/g,n.value)),e&&(e=e.replace(/\$property/g,n.property)),e&&(e=e.replace(/\$target/g,n.targetName)),e},r}(),$=globalThis&&globalThis.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var e=n.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=e.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}return o},Y=function(){function r(t,n){this.validator=t,this.validatorOptions=n,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=lt()}return r.prototype.execute=function(t,n,e){var i=this,o,s;!this.metadataStorage.hasValidationMetaData&&((o=this.validatorOptions)===null||o===void 0?void 0:o.enableDebugMessages)===!0&&console.warn(`No validation metadata found. No validation will be  performed. There are multiple possible reasons:
  - There may be multiple class-validator versions installed. You will need to flatten your dependencies to fix the issue.
  - This validation runs before any file with validation decorator was parsed by NodeJS.`);var a=this.validatorOptions?this.validatorOptions.groups:void 0,u=this.validatorOptions&&this.validatorOptions.strictGroups||!1,c=this.validatorOptions&&this.validatorOptions.always||!1,p=((s=this.validatorOptions)===null||s===void 0?void 0:s.forbidUnknownValues)===void 0||this.validatorOptions.forbidUnknownValues!==!1,d=this.metadataStorage.getTargetValidationMetadatas(t.constructor,n,c,u,a),f=this.metadataStorage.groupByPropertyName(d);if(this.validatorOptions&&p&&!d.length){var x=new Q;(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(x.target=t),x.value=void 0,x.property=void 0,x.children=[],x.constraints={unknownValue:"an unknown value was passed to the validate function"},e.push(x);return}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(t,f,e),Object.keys(f).forEach(function(L){var b=t[L],S=f[L].filter(function(A){return A.type===D.IS_DEFINED}),T=f[L].filter(function(A){return A.type!==D.IS_DEFINED&&A.type!==D.WHITELIST});b instanceof Promise&&T.find(function(A){return A.type===D.PROMISE_VALIDATION})?i.awaitingPromises.push(b.then(function(A){i.performValidations(t,A,L,S,T,e)})):i.performValidations(t,b,L,S,T,e)})},r.prototype.whitelist=function(t,n,e){var i=this,o=[];Object.keys(t).forEach(function(s){(!n[s]||n[s].length===0)&&o.push(s)}),o.length>0&&(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?o.forEach(function(s){var a,u=i.generateValidationError(t,t[s],s);u.constraints=(a={},a[D.WHITELIST]="property ".concat(s," should not exist"),a),u.children=void 0,e.push(u)}):o.forEach(function(s){return delete t[s]}))},r.prototype.stripEmptyErrors=function(t){var n=this;return t.filter(function(e){if(e.children&&(e.children=n.stripEmptyErrors(e.children)),Object.keys(e.constraints).length===0){if(e.children.length===0)return!1;delete e.constraints}return!0})},r.prototype.performValidations=function(t,n,e,i,o,s){var a=o.filter(function(f){return f.type===D.CUSTOM_VALIDATION}),u=o.filter(function(f){return f.type===D.NESTED_VALIDATION}),c=o.filter(function(f){return f.type===D.CONDITIONAL_VALIDATION}),p=this.generateValidationError(t,n,e);s.push(p);var d=this.conditionalValidations(t,n,c);!d||(this.customValidations(t,n,i,p),this.mapContexts(t,n,i,p),!(n===void 0&&this.validatorOptions&&this.validatorOptions.skipUndefinedProperties===!0)&&(n===null&&this.validatorOptions&&this.validatorOptions.skipNullProperties===!0||n==null&&this.validatorOptions&&this.validatorOptions.skipMissingProperties===!0||(this.customValidations(t,n,a,p),this.nestedValidations(n,u,p),this.mapContexts(t,n,o,p),this.mapContexts(t,n,a,p))))},r.prototype.generateValidationError=function(t,n,e){var i=new Q;return(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(i.target=t),(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.value===void 0||this.validatorOptions.validationError.value===!0)&&(i.value=n),i.property=e,i.children=[],i.constraints={},i},r.prototype.conditionalValidations=function(t,n,e){return e.map(function(i){return i.constraints[0](t,n)}).reduce(function(i,o){return i&&o},!0)},r.prototype.customValidations=function(t,n,e,i){var o=this;e.forEach(function(s){o.metadataStorage.getTargetValidatorConstraints(s.constraintCls).forEach(function(a){if(!(a.async&&o.ignoreAsyncValidations)&&!(o.validatorOptions&&o.validatorOptions.stopAtFirstError&&Object.keys(i.constraints||{}).length>0)){var u={targetName:t.constructor?t.constructor.name:void 0,property:s.propertyName,object:t,value:n,constraints:s.constraints};if(!s.each||!(Array.isArray(n)||n instanceof Set||n instanceof Map)){var c=a.instance.validate(n,u);if(G(c)){var p=c.then(function(y){if(!y){var E=$(o.createValidationError(t,n,s,a),2),l=E[0],v=E[1];i.constraints[l]=v,s.context&&(i.contexts||(i.contexts={}),i.contexts[l]=Object.assign(i.contexts[l]||{},s.context))}});o.awaitingPromises.push(p)}else if(!c){var d=$(o.createValidationError(t,n,s,a),2),f=d[0],x=d[1];i.constraints[f]=x}return}var L=at(n),b=L.map(function(y){return a.instance.validate(y,u)}),S=b.some(function(y){return G(y)});if(S){var T=b.map(function(y){return G(y)?y:Promise.resolve(y)}),A=Promise.all(T).then(function(y){var E=y.every(function(C){return C});if(!E){var l=$(o.createValidationError(t,n,s,a),2),v=l[0],m=l[1];i.constraints[v]=m,s.context&&(i.contexts||(i.contexts={}),i.contexts[v]=Object.assign(i.contexts[v]||{},s.context))}});o.awaitingPromises.push(A);return}var O=b.every(function(y){return y});if(!O){var h=$(o.createValidationError(t,n,s,a),2),f=h[0],x=h[1];i.constraints[f]=x}}})})},r.prototype.nestedValidations=function(t,n,e){var i=this;t!==void 0&&n.forEach(function(o){if(!(o.type!==D.NESTED_VALIDATION&&o.type!==D.PROMISE_VALIDATION)&&!(i.validatorOptions&&i.validatorOptions.stopAtFirstError&&Object.keys(e.constraints||{}).length>0))if(Array.isArray(t)||t instanceof Set||t instanceof Map){var s=t instanceof Set?Array.from(t):t;s.forEach(function(d,f){i.performValidations(t,d,f.toString(),[],n,e.children)})}else if(t instanceof Object){var a=typeof o.target=="string"?o.target:o.target.name;i.execute(t,a,e.children)}else{var u=$(i.createValidationError(o.target,t,o),2),c=u[0],p=u[1];e.constraints[c]=p}})},r.prototype.mapContexts=function(t,n,e,i){var o=this;return e.forEach(function(s){if(s.context){var a=void 0;if(s.type===D.CUSTOM_VALIDATION){var u=o.metadataStorage.getTargetValidatorConstraints(s.constraintCls);a=u[0]}var c=o.getConstraintType(s,a);i.constraints[c]&&(i.contexts||(i.contexts={}),i.contexts[c]=Object.assign(i.contexts[c]||{},s.context))}})},r.prototype.createValidationError=function(t,n,e,i){var o=t.constructor?t.constructor.name:void 0,s=this.getConstraintType(e,i),a={targetName:o,property:e.propertyName,object:t,value:n,constraints:e.constraints},u=e.message||"";!e.message&&(!this.validatorOptions||this.validatorOptions&&!this.validatorOptions.dismissDefaultMessages)&&i&&i.instance.defaultMessage instanceof Function&&(u=i.instance.defaultMessage(a));var c=ht.replaceMessageSpecialTokens(u,a);return[s,c]},r.prototype.getConstraintType=function(t,n){var e=n&&n.name?n.name:t.type;return e},r}(),yt=globalThis&&globalThis.__awaiter||function(r,t,n,e){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(p){try{c(e.next(p))}catch(d){s(d)}}function u(p){try{c(e.throw(p))}catch(d){s(d)}}function c(p){p.done?o(p.value):i(p.value).then(a,u)}c((e=e.apply(r,t||[])).next())})},vt=globalThis&&globalThis.__generator||function(r,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(p){return u([c,p])}}function u(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(e=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(r,n)}catch(p){c=[6,p],i=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},X=function(){function r(){}return r.prototype.validate=function(t,n,e){return this.coreValidate(t,n,e)},r.prototype.validateOrReject=function(t,n,e){return yt(this,void 0,void 0,function(){var i;return vt(this,function(o){switch(o.label){case 0:return[4,this.coreValidate(t,n,e)];case 1:return i=o.sent(),i.length?[2,Promise.reject(i)]:[2]}})})},r.prototype.validateSync=function(t,n,e){var i=typeof t=="string"?n:t,o=typeof t=="string"?e:n,s=typeof t=="string"?t:void 0,a=new Y(this,o);a.ignoreAsyncValidations=!0;var u=[];return a.execute(i,s,u),a.stripEmptyErrors(u)},r.prototype.coreValidate=function(t,n,e){var i=typeof t=="string"?n:t,o=typeof t=="string"?e:n,s=typeof t=="string"?t:void 0,a=new Y(this,o),u=[];return a.execute(i,s,u),Promise.all(a.awaitingPromises).then(function(){return a.stripEmptyErrors(u)})},r}(),gt=new(function(){function r(){this.instances=[]}return r.prototype.get=function(t){var n=this.instances.find(function(e){return e.type===t});return n||(n={type:t,object:new t},this.instances.push(n)),n.object},r}());function Z(r){return gt.get(r)}function St(r,t,n){return typeof r=="string"?Z(X).validate(r,t,n):Z(X).validate(r,t)}var g;(function(r){r[r.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",r[r.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",r[r.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(g||(g={}));var At=function(){function r(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return r.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},r.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.findTransformMetadatas=function(t,n,e){return this.findMetadatas(this._transformMetadatas,t,n).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?e===g.CLASS_TO_CLASS||e===g.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?e===g.CLASS_TO_PLAIN:!0})},r.prototype.findExcludeMetadata=function(t,n){return this.findMetadata(this._excludeMetadatas,t,n)},r.prototype.findExposeMetadata=function(t,n){return this.findMetadata(this._exposeMetadatas,t,n)},r.prototype.findExposeMetadataByCustomName=function(t,n){return this.getExposedMetadatas(t).find(function(e){return e.options&&e.options.name===n})},r.prototype.findTypeMetadata=function(t,n){return this.findMetadata(this._typeMetadatas,t,n)},r.prototype.getStrategy=function(t){var n=this._excludeMetadatas.get(t),e=n&&n.get(void 0),i=this._exposeMetadatas.get(t),o=i&&i.get(void 0);return e&&o||!e&&!o?"none":e?"excludeAll":"exposeAll"},r.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},r.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},r.prototype.getExposedProperties=function(t,n){return this.getExposedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===g.CLASS_TO_CLASS||n===g.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===g.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.getExcludedProperties=function(t,n){return this.getExcludedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===g.CLASS_TO_CLASS||n===g.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===g.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},r.prototype.getMetadata=function(t,n){var e=t.get(n),i;e&&(i=Array.from(e.values()).filter(function(d){return d.propertyName!==void 0}));for(var o=[],s=0,a=this.getAncestors(n);s<a.length;s++){var u=a[s],c=t.get(u);if(c){var p=Array.from(c.values()).filter(function(d){return d.propertyName!==void 0});o.push.apply(o,p)}}return o.concat(i||[])},r.prototype.findMetadata=function(t,n,e){var i=t.get(n);if(i){var o=i.get(e);if(o)return o}for(var s=0,a=this.getAncestors(n);s<a.length;s++){var u=a[s],c=t.get(u);if(c){var p=c.get(e);if(p)return p}}},r.prototype.findMetadatas=function(t,n,e){var i=t.get(n),o;i&&(o=i.get(e));for(var s=[],a=0,u=this.getAncestors(n);a<u.length;a++){var c=u[a],p=t.get(c);p&&p.has(e)&&s.push.apply(s,p.get(e))}return s.slice().reverse().concat((o||[]).slice().reverse())},r.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var n=[],e=Object.getPrototypeOf(t.prototype.constructor);typeof e.prototype!="undefined";e=Object.getPrototypeOf(e.prototype.constructor))n.push(e);this._ancestorsMap.set(t,n)}return this._ancestorsMap.get(t)},r}(),I=new At;function Ot(){if(typeof globalThis!="undefined")return globalThis;if(typeof global!="undefined")return global;if(typeof window!="undefined")return window;if(typeof self!="undefined")return self}function xt(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var tt=globalThis&&globalThis.__spreadArray||function(r,t,n){if(n||arguments.length===2)for(var e=0,i=t.length,o;e<i;e++)(o||!(e in t))&&(o||(o=Array.prototype.slice.call(t,0,e)),o[e]=t[e]);return r.concat(o||Array.prototype.slice.call(t))};function Mt(r){var t=new r;return!(t instanceof Set)&&!("push"in t)?[]:t}var R=function(){function r(t,n){this.transformationType=t,this.options=n,this.recursionStack=new Set}return r.prototype.transform=function(t,n,e,i,o,s){var a=this;if(s===void 0&&(s=0),Array.isArray(n)||n instanceof Set){var u=i&&this.transformationType===g.PLAIN_TO_CLASS?Mt(i):[];return n.forEach(function(S,T){var A=t?t[T]:void 0;if(!a.options.enableCircularCheck||!a.isCircular(S)){var O=void 0;if(typeof e!="function"&&e&&e.options&&e.options.discriminator&&e.options.discriminator.property&&e.options.discriminator.subTypes){if(a.transformationType===g.PLAIN_TO_CLASS){O=e.options.discriminator.subTypes.find(function(l){return l.name===S[e.options.discriminator.property]});var h={newObject:u,object:S,property:void 0},y=e.typeFunction(h);O===void 0?O=y:O=O.value,e.options.keepDiscriminatorProperty||delete S[e.options.discriminator.property]}a.transformationType===g.CLASS_TO_CLASS&&(O=S.constructor),a.transformationType===g.CLASS_TO_PLAIN&&(S[e.options.discriminator.property]=e.options.discriminator.subTypes.find(function(l){return l.value===S.constructor}).name)}else O=e;var E=a.transform(A,S,O,void 0,S instanceof Map,s+1);u instanceof Set?u.add(E):u.push(E)}else a.transformationType===g.CLASS_TO_CLASS&&(u instanceof Set?u.add(S):u.push(S))}),u}else{if(e===String&&!o)return n==null?n:String(n);if(e===Number&&!o)return n==null?n:Number(n);if(e===Boolean&&!o)return n==null?n:Boolean(n);if((e===Date||n instanceof Date)&&!o)return n instanceof Date?new Date(n.valueOf()):n==null?n:new Date(n);if(!!Ot().Buffer&&(e===Buffer||n instanceof Buffer)&&!o)return n==null?n:Buffer.from(n);if(xt(n)&&!o)return new Promise(function(S,T){n.then(function(A){return S(a.transform(void 0,A,e,void 0,void 0,s+1))},T)});if(!o&&n!==null&&typeof n=="object"&&typeof n.then=="function")return n;if(typeof n=="object"&&n!==null){!e&&n.constructor!==Object&&(!Array.isArray(n)&&n.constructor===Array||(e=n.constructor)),!e&&t&&(e=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var c=this.getKeys(e,n,o),p=t||{};!t&&(this.transformationType===g.PLAIN_TO_CLASS||this.transformationType===g.CLASS_TO_CLASS)&&(o?p=new Map:e?p=new e:p={});for(var d=function(S){if(S==="__proto__"||S==="constructor")return"continue";var T=S,A=S,O=S;if(!f.options.ignoreDecorators&&e){if(f.transformationType===g.PLAIN_TO_CLASS){var h=I.findExposeMetadataByCustomName(e,S);h&&(O=h.propertyName,A=h.propertyName)}else if(f.transformationType===g.CLASS_TO_PLAIN||f.transformationType===g.CLASS_TO_CLASS){var h=I.findExposeMetadata(e,S);h&&h.options&&h.options.name&&(A=h.options.name)}}var y=void 0;f.transformationType===g.PLAIN_TO_CLASS?y=n[T]:n instanceof Map?y=n.get(T):n[T]instanceof Function?y=n[T]():y=n[T];var E=void 0,l=y instanceof Map;if(e&&o)E=e;else if(e){var v=I.findTypeMetadata(e,O);if(v){var m={newObject:p,object:n,property:O},C=v.typeFunction?v.typeFunction(m):v.reflectedType;v.options&&v.options.discriminator&&v.options.discriminator.property&&v.options.discriminator.subTypes?n[T]instanceof Array?E=v:(f.transformationType===g.PLAIN_TO_CLASS&&(E=v.options.discriminator.subTypes.find(function(F){if(y&&y instanceof Object&&v.options.discriminator.property in y)return F.name===y[v.options.discriminator.property]}),E===void 0?E=C:E=E.value,v.options.keepDiscriminatorProperty||y&&y instanceof Object&&v.options.discriminator.property in y&&delete y[v.options.discriminator.property]),f.transformationType===g.CLASS_TO_CLASS&&(E=y.constructor),f.transformationType===g.CLASS_TO_PLAIN&&y&&(y[v.options.discriminator.property]=v.options.discriminator.subTypes.find(function(F){return F.value===y.constructor}).name)):E=C,l=l||v.reflectedType===Map}else if(f.options.targetMaps)f.options.targetMaps.filter(function(F){return F.target===e&&!!F.properties[O]}).forEach(function(F){return E=F.properties[O]});else if(f.options.enableImplicitConversion&&f.transformationType===g.PLAIN_TO_CLASS){var P=Reflect.getMetadata("design:type",e.prototype,O);P&&(E=P)}}var w=Array.isArray(n[T])?f.getReflectedType(e,O):void 0,_=t?t[T]:void 0;if(p.constructor.prototype){var V=Object.getOwnPropertyDescriptor(p.constructor.prototype,A);if((f.transformationType===g.PLAIN_TO_CLASS||f.transformationType===g.CLASS_TO_CLASS)&&(V&&!V.set||p[A]instanceof Function))return"continue"}if(!f.options.enableCircularCheck||!f.isCircular(y)){var k=f.transformationType===g.PLAIN_TO_CLASS?A:S,M=void 0;f.transformationType===g.CLASS_TO_PLAIN?(M=n[k],M=f.applyCustomTransformations(M,e,k,n,f.transformationType),M=n[k]===M?y:M,M=f.transform(_,M,E,w,l,s+1)):y===void 0&&f.options.exposeDefaultValues?M=p[A]:(M=f.transform(_,y,E,w,l,s+1),M=f.applyCustomTransformations(M,e,k,n,f.transformationType)),(M!==void 0||f.options.exposeUnsetFields)&&(p instanceof Map?p.set(A,M):p[A]=M)}else if(f.transformationType===g.CLASS_TO_CLASS){var M=y;M=f.applyCustomTransformations(M,e,S,n,f.transformationType),(M!==void 0||f.options.exposeUnsetFields)&&(p instanceof Map?p.set(A,M):p[A]=M)}},f=this,x=0,L=c;x<L.length;x++){var b=L[x];d(b)}return this.options.enableCircularCheck&&this.recursionStack.delete(n),p}else return n}},r.prototype.applyCustomTransformations=function(t,n,e,i,o){var s=this,a=I.findTransformMetadatas(n,e,this.transformationType);return this.options.version!==void 0&&(a=a.filter(function(u){return u.options?s.checkVersion(u.options.since,u.options.until):!0})),this.options.groups&&this.options.groups.length?a=a.filter(function(u){return u.options?s.checkGroups(u.options.groups):!0}):a=a.filter(function(u){return!u.options||!u.options.groups||!u.options.groups.length}),a.forEach(function(u){t=u.transformFn({value:t,key:e,obj:i,type:o,options:s.options})}),t},r.prototype.isCircular=function(t){return this.recursionStack.has(t)},r.prototype.getReflectedType=function(t,n){if(!!t){var e=I.findTypeMetadata(t,n);return e?e.reflectedType:void 0}},r.prototype.getKeys=function(t,n,e){var i=this,o=I.getStrategy(t);o==="none"&&(o=this.options.strategy||"exposeAll");var s=[];if((o==="exposeAll"||e)&&(n instanceof Map?s=Array.from(n.keys()):s=Object.keys(n)),e)return s;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var a=I.getExposedProperties(t,this.transformationType),u=I.getExcludedProperties(t,this.transformationType);s=tt(tt([],a,!0),u,!0)}if(!this.options.ignoreDecorators&&t){var a=I.getExposedProperties(t,this.transformationType);this.transformationType===g.PLAIN_TO_CLASS&&(a=a.map(function(d){var f=I.findExposeMetadata(t,d);return f&&f.options&&f.options.name?f.options.name:d})),this.options.excludeExtraneousValues?s=a:s=s.concat(a);var c=I.getExcludedProperties(t,this.transformationType);c.length>0&&(s=s.filter(function(d){return!c.includes(d)})),this.options.version!==void 0&&(s=s.filter(function(d){var f=I.findExposeMetadata(t,d);return!f||!f.options?!0:i.checkVersion(f.options.since,f.options.until)})),this.options.groups&&this.options.groups.length?s=s.filter(function(d){var f=I.findExposeMetadata(t,d);return!f||!f.options?!0:i.checkGroups(f.options.groups)}):s=s.filter(function(d){var f=I.findExposeMetadata(t,d);return!f||!f.options||!f.options.groups||!f.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(s=s.filter(function(p){return i.options.excludePrefixes.every(function(d){return p.substr(0,d.length)!==d})})),s=s.filter(function(p,d,f){return f.indexOf(p)===d}),s},r.prototype.checkVersion=function(t,n){var e=!0;return e&&t&&(e=this.options.version>=t),e&&n&&(e=this.options.version<n),e},r.prototype.checkGroups=function(t){return t?this.options.groups.some(function(n){return t.includes(n)}):!0},r}(),B={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},N=globalThis&&globalThis.__assign||function(){return N=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},N.apply(this,arguments)},Tt=function(){function r(){}return r.prototype.instanceToPlain=function(t,n){var e=new R(g.CLASS_TO_PLAIN,N(N({},B),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToPlainFromExist=function(t,n,e){var i=new R(g.CLASS_TO_PLAIN,N(N({},B),e));return i.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.plainToInstance=function(t,n,e){var i=new R(g.PLAIN_TO_CLASS,N(N({},B),e));return i.transform(void 0,n,t,void 0,void 0,void 0)},r.prototype.plainToClassFromExist=function(t,n,e){var i=new R(g.PLAIN_TO_CLASS,N(N({},B),e));return i.transform(t,n,void 0,void 0,void 0,void 0)},r.prototype.instanceToInstance=function(t,n){var e=new R(g.CLASS_TO_CLASS,N(N({},B),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToClassFromExist=function(t,n,e){var i=new R(g.CLASS_TO_CLASS,N(N({},B),e));return i.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.serialize=function(t,n){return JSON.stringify(this.instanceToPlain(t,n))},r.prototype.deserialize=function(t,n,e){var i=JSON.parse(n);return this.plainToInstance(t,i,e)},r.prototype.deserializeArray=function(t,n,e){var i=JSON.parse(n);return this.plainToInstance(t,i,e)},r}(),nt=new Tt;function Et(r,t){return nt.instanceToPlain(r,t)}function mt(r,t,n){return nt.plainToInstance(r,t,n)}function Lt(r,t,n,e="post",i,o={}){const s=et(),a=j({...n}),u=j({}),c=j(!1),p=j([]),d=j(t),f=j(r),x=rt({onSuccess:l=>(s.notify({color:"positive",message:"Form submitted successfully!"}),l),onError:async l=>{if(it.isAxiosError(l)&&l.response){const v=l.response.data;v&&v.errors?(u.value=v.errors,Object.entries(u.value).forEach(([m,C])=>{m in n||s.notify({color:"negative",message:`${m}: ${C.join("; ")}`})})):s.notify({color:"negative",message:l.response.data.statusCode+" "+l.response.data.message})}else s.notify({color:"negative",message:"An unexpected error occurred."});throw l},beforeSubmit:l=>l});async function L(l,v,m={}){const{expectArray:C,filterExtraFields:P=!1,warnOnExtraFields:w=!1,throwOnExtraFields:_=!1,validatorOptions:V={},onValidationError:k,validationFailed:M="warn"}=m,F=C!==void 0?C:Array.isArray(new v),J=Array.isArray(l);if(F!==J){const U=F?"Expected an array, but received a single object.":"Expected a single object, but received an array.";throw console.error("Response type mismatch:",U),new Error(U)}const z=async U=>{const W=mt(v,U,{excludeExtraneousValues:P}),H=await St(W,V);H.length>0&&b(H,M,k);const q=Et(W);return P||S(U,q,w,_),q};return J?Promise.all(l.map(z)):z(l)}function b(l,v,m){if(m)m(l);else switch(v){case"warn":console.warn("Validation failed:",l);break;case"throw":throw console.error("Validation failed:",l),l}}function S(l,v,m,C){const P=Object.keys(l).filter(w=>!(w in v));if(P.length>0&&(m&&console.warn("Extra fields detected:",P),C))throw new Error(`Extra fields detected: ${P.join(", ")}`)}const T=l=>{d.value=l},A=l=>{f.value=l},O=l=>l instanceof File,h=l=>O(l)?!0:Array.isArray(l)?l.some(h):typeof l=="object"&&l!==null?Object.values(l).some(h):!1;return{values:a,errors:u,isLoading:c,updateUrl:T,updateApiInstance:A,validateAndSubmit:async(l=!0)=>{u.value={},c.value=!0;let v=await x.beforeSubmit(a.value);v||(v=a.value);let m;const C=h(a.value);C?(m=new FormData,Object.entries(v).forEach(([w,_])=>{O(_)?m.append(w,_):Array.isArray(_)&&_.some(O)?_.forEach(V=>{O(V)&&m.append(w,V)}):typeof _=="object"&&_!==null&&!(_ instanceof File)?m.append(w,JSON.stringify(_)):m.append(w,_)})):m=v;const P={headers:{"Content-Type":C?"multipart/form-data":"application/json"}};try{const w=await f.value[e](d.value,m,P);if(i)try{p.value=await L(w.data,i,o)}catch(_){if(_ instanceof Error&&_.message.includes("Response type mismatch"))console.error("Response type mismatch:",_.message),s.notify({color:"negative",message:"Unexpected response format. Please check the console for details."});else if(o.onValidationError)o.onValidationError(_);else throw _;return}else p.value=w.data;l&&(a.value={...n}),await x.onSuccess(w.data)}catch(w){await x.onError(w),console.error(w)}finally{c.value=!1}},validateResponse:L,responseData:p,callbacks:x,resetForm:()=>{a.value={...n}}}}export{Lt as u};
